class AnSlider{constructor({selector:e,indicators:t=!0,arrows:i=!1}){if(!e)return console.error("Selector is empty"),void 0;this.selector=e;this.sliderElement=document.querySelector(e);this.slider=null;this.slides=null;this.indicators=t;this.arrows=i;this.leftArrow=null;this.rightArrow=null;this.sliderId=Date.now();this.isTouchSupported="ontouchstart"in window;this.activeSlideIndex=0;this.buttons=[];this.init()}debounce(t,i){let s;return function(...e){clearTimeout(s);s=setTimeout(()=>t(...e),i)}}handleScroll(){var e=this.slider.getBoundingClientRect(),t=this.slider.offsetWidth,i=this.slider.scrollLeft,s=this.slider.scrollWidth;if(e){this.buttons[this.activeSlideIndex]?.classList.remove("active");if(s<=i+t)this.activeSlideIndex=this.slides.length-1;else if(i<=0)this.activeSlideIndex=0;else{const l=document.elementsFromPoint(e.x+e.width/2,e.y+e.height/2).find(e=>e.classList.contains("an-slide"))?.id;if(l){s=l.split("-");this.activeSlideIndex=parseInt(s[1])}}this.buttons[this.activeSlideIndex]?.classList.add("active");if(this.arrows){this.leftArrow?.classList.toggle("an-slider-hidden",0===this.activeSlideIndex);this.rightArrow?.classList.toggle("an-slider-hidden",this.activeSlideIndex===this.slides.length-1)}}}addDragEvents(){if(!this.isTouchSupported){const r=this;let i=null,s=null,l=!1;this.slider.addEventListener("mousedown",function(e){if(0===e.button){i=e.clientX;s=e.clientY;l=!0}});this.slider.addEventListener("mousemove",function(e){if(l&&5<Math.abs(e.clientX-i)){var t=e.clientX,e=e.clientY;if(i&&s){t=i-t,e=s-e;Math.abs(t)>Math.abs(e)&&(0<t?r.slides[r.activeSlideIndex+1]:r.slides[r.activeSlideIndex-1])?.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"});i=null;s=null}}});this.slider.addEventListener("mouseup",function(){l=!1;i=null;s=null})}}loadStyles(){var e="anSliderStyles";if(!document.getElementById(e)){const t=document.createElement("style");t.id=e;t.textContent=`.an-slide>img,.an-slider-wrapper{max-width:100%}.an-slide,.an-slider>*{scroll-snap-align:center}.an-slider-wrapper,.an-slider-wrapper *{box-sizing:border-box}.an-slider-with-arrows{position:relative}.an-slider-hidden{display:none}.an-slide>img{height:auto;width:100%;vertical-align:bottom;transition:opacity 0.3s ease-in-out;opacity:inherit;pointer-events:none;user-select:none}.an-slide{display:flex;justify-content:center;align-items:center;flex:0 0 calc(100vw - 16px)}@media (min-width:466px){.an-slide{flex:0 0 450px}}.an-slider{overflow:scroll hidden;display:flex;flex-flow:row nowrap;gap:35px;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch;cursor:grab}.an-slider::-webkit-scrollbar{display:none}.an-slider-buttons{margin-top:10px;display:flex;justify-content:center;gap:7px}.an-slider-button{width:15px;height:15px;border:1px solid #000;border-radius:100%}@media (hover:hover){.an-slider-button{width:10px;height:10px;cursor:pointer}.an-slider-buttons{gap:4px}}.an-slider-button.active{background-color:#000;cursor:default}.an-slider-left-arrow{left:10px;background-image:url('data:image/svg+xml,<svg width="143" height="330" xmlns="http://www.w3.org/2000/svg" xml:space="preserve"><path stroke="null" d="M3.213 155.996 115.709 6c4.972-6.628 14.372-7.97 21-3 6.627 4.97 7.97 14.373 3 21L33.962 164.997 139.709 306c4.97 6.627 3.626 16.03-3 21a14.929 14.929 0 0 1-8.988 3c-4.56 0-9.065-2.071-12.012-6L3.213 173.996a15 15 0 0 1 0-18z"/></svg>')}.an-slider-right-arrow{right:10px;background-image:url('data:image/svg+xml,<svg width="143" height="330" xmlns="http://www.w3.org/2000/svg" xml:space="preserve"><path d="M140.001 155.997 27.501 6c-4.972-6.628-14.372-7.97-21-3s-7.97 14.373-3 21l105.75 140.997L3.501 306c-4.97 6.627-3.627 16.03 3 21a14.93 14.93 0 0 0 8.988 3c4.561 0 9.065-2.071 12.012-6l112.5-150.004a15 15 0 0 0 0-18z"/></svg>')}.an-slider-left-arrow,.an-slider-right-arrow{position:absolute;top:50%;transform:translateY(-50%);background-size:contain;background-repeat:no-repeat;width:14px;height:32px;cursor:pointer}
`;document.head.appendChild(t)}}init(){if(!this.sliderElement)return console.error(`Element with selector ${this.selector} not found`),void 0;this.sliderElement.classList.add("an-slider-wrapper");var e=this.sliderElement.children;if(e.length<1)return console.error(`Element with selector ${this.selector} has no slides`),void 0;const l=document.createElement("div");let r;l.classList.add("an-slider");this.indicators&&(r=document.createElement("div")).classList.add("an-slider-buttons");if(this.arrows){this.leftArrow=document.createElement("div");this.leftArrow.classList.add("an-slider-left-arrow","an-slider-hidden");this.leftArrow.addEventListener("click",()=>{this.slides[this.activeSlideIndex-1]?.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})});this.rightArrow=document.createElement("div");this.rightArrow.classList.add("an-slider-right-arrow");this.rightArrow.addEventListener("click",()=>{this.slides[this.activeSlideIndex+1]?.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})});this.sliderElement.classList.add("an-slider-with-arrows");l.appendChild(this.leftArrow);l.appendChild(this.rightArrow)}Array.from(e).forEach((e,t)=>{const i=document.createElement("div");i.classList.add("an-slide");i.id=`slide-${t}-`+this.sliderId;i.appendChild(e);l.appendChild(i);if(this.indicators){const s=document.createElement("div");s.id=`slide-${t}-btn-`+this.sliderId;s.className=0===t?"an-slider-button active":"an-slider-button";s.addEventListener("click",()=>{const e=document.getElementById(`slide-${t}-`+this.sliderId);e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})});r.appendChild(s);this.buttons.push(s)}});this.loadStyles();this.sliderElement.appendChild(l);this.slider=this.sliderElement.querySelector(".an-slider");this.slides=this.slider.querySelectorAll(".an-slide");this.indicators&&this.sliderElement.appendChild(r);this.slider.addEventListener("scroll",this.debounce(this.handleScroll.bind(this),200));this.addDragEvents()}}
